<div class="container-fluid bg-top">
    <div class="row bg-grad">
        <div class="col-md-12 text-center mb-200">
            <img class="mt-35" src="assets/img/logo-admove.png" alt="AdMove.com">
        </div>
    </div>
</div>

<div class="container">

    <form data-toggle="validator" role="form">

        <div class="row mt-35">
            <div class="col-md-12 mt-200-minus">

                <h3 class="fs-26 text-uppercase text-center">Inserisci i dati dell'inserzionista e imposta la campagna</h3>

                <div class="row" data-row-flow1>

                    <div class="col-md-5 col-md-offset-0 col-sm-10 col-sm-offset-1 mt-25">
                        <div class="panel panel-default shadow">
                            <div class="panel-heading"><span class="text-uppercase">Inserisci i dati del cliente:</span></div>
                            <div class="panel-body">
                                <div class="form-group mt-25">
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon"><span class="input-ico ico-home"></span></span>
                                        <input type="text" class="form-control b-radius-right-2" name="businessName" required data-error="Campo obbligatorio">
                                        <label class="placeholder">Nome dell'attività</label>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>

                                <div class="form-group mt-50">
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon"><span class="input-ico ico-location"></span></span>
                                        <input type="text" class="form-control b-radius-right-2" name="address" required data-error="Campo obbligatorio">
                                        <label class="placeholder">Indirizzo del punto vendita</label>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>

                                <p class="m-0 mt-25 color-green-water"><span class="badge bg-light-blue pull-left mr-10"><i>i</i></span>Potrai inserire altri indirizzi successivamente.</p>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-5 col-md-offset-2 col-sm-10 col-sm-offset-1 mt-25">
                        <div class="panel panel-default shadow">
                            <div class="panel-heading"><span class="text-uppercase">Scegli la categoria:</span></div>
                            <div class="panel-body">
                                <p class="fs-16">Indica la categoria commerciale più affine all’attività protagonista della campagna.</p>

                                <div class="form-group mt-75 mb-45">
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon"><span class="input-ico ico-category"></span></span>
                                        <input type="text" class="form-control b-radius-right-2" id="category" required data-error="Campo obbligatorio">
                                        <label class="placeholder">Inserisci la categoria</label>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row" data-row-flow2>

                    <div class="col-md-5 col-md-offset-0 col-sm-10 col-sm-offset-1 mt-25">
                        <div class="panel panel-default shadow">
                            <div class="panel-heading"><span class="text-uppercase">Inserisci il nome:</span></div>
                            <div class="panel-body">
                                <div class="form-group mt-25">
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon"><span class="input-ico ico-home"></span></span>
                                        <input type="text" class="form-control b-radius-right-2" name="businessName" required data-error="Campo obbligatorio">
                                        <label class="placeholder">Nome dell'attività</label>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-5 col-md-offset-2 col-sm-10 col-sm-offset-1 mt-25">
                        <div class="panel panel-default shadow">
                            <div class="panel-heading"><span class="text-uppercase">Inserisci l'indirizzo:</span></div>
                            <div class="panel-body">
                                <div class="form-group mt-25">
                                    <div class="input-group input-group-lg">
                                        <span class="input-group-addon"><span class="input-ico ico-location"></span></span>
                                        <input type="text" class="form-control b-radius-right-2" name="address" required data-error="Campo obbligatorio">
                                        <label class="placeholder">Indirizzo del punto vendita</label>
                                    </div>
                                    <div class="help-block with-errors"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row mt-50" data-row-flow2>
                    <div class="col-md-12">
                        <p class="text-uppercase new-title mb-35">Seleziona l'obiettivo</p>

                        <div class="row row-eq-height-responsive mt-15 parent-target">
                            <div class="col-md-10">
                                <div class="row selections">
                                    <div class="col-md-6">
                                        <a href="#" class="a-box">
                                            <div class="well box-target selected" data-objective="Branding">
                                                <div class="row row-eq-height">
                                                    <div class="col-xs-3 target-img bg-check obiettivo">
                                                        <img class="img-responsive" src="assets/img/img-about-activities.png" alt="">
                                                    </div>
                                                    <div class="col-xs-9">
                                                        <p class="text-uppercase title-sky-blue fs-15 sep-bottom">AWARENESS</p>
                                                        <p class="m-0">Per pubblicizzare l’insegna del Punto Vendita. Se scegli questo obiettivo, AdMove ti chiederà di indicare il <b>nome dell’insegna</b> e i contatti dell’esercente, per personalizzare l’annuncio.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="#" class="a-box">
                                            <div class="well box-target" data-objective="NewOffer">
                                                <div class="row row-eq-height">
                                                    <div class="col-xs-3 target-img bg-check obiettivo">
                                                        <img class="img-responsive" src="assets/img/img-promote-product-service.png" alt="">
                                                    </div>
                                                    <div class="col-xs-9">
                                                        <p class="text-uppercase title-sky-blue fs-15 sep-bottom">PUSH</p>
                                                        <p class="m-0">Per spingere uno specifico prodotto o servizio. Se scegli questo obiettivo, oltre a indicare il nome dell’insegna e i contatti dell’esercente, AdMove ti chiederà di <b>specificare il prodotto da promuovere</b>.</p>
                                                    </div>
                                                    
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="#" class="a-box">
                                            <div class="well box-target" data-objective="PromotionPrice">
                                                <div class="row row-eq-height">
                                                    <div class="col-xs-3 target-img bg-check obiettivo">
                                                        <img class="img-responsive" src="assets/img/img-offer-promotion.png" alt="">
                                                    </div>
                                                    <div class="col-xs-9">
                                                        <p class="text-uppercase title-sky-blue fs-15 sep-bottom">PROMO</p>
                                                        <p class="m-0">Per pubblicizzare le iniziative promozionali (prodotti a prezzi speciali). Se scegli questo obiettivo, oltre a indicare il nome dell’insegna e i contatti dell’esercente, AdMove ti chiederà  di specificare il <b>prodotto in promozione</b> e il <b>prezzo speciale</b>.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <a href="#" class="a-box">
                                            <div class="well box-target" data-objective="PromotionDiscount">
                                                <div class="row row-eq-height">
                                                    <div class="col-xs-3 target-img bg-check obiettivo">
                                                        <img class="img-responsive" src="assets/img/img-propose-discount.png" alt="">
                                                    </div>
                                                    <div class="col-xs-9">
                                                        <p class="text-uppercase title-sky-blue fs-15 sep-bottom">DISCOUNT</p>
                                                        <p class="m-0">Per pubblicizzare gli sconti.  Se scegli questo obiettivo, oltre a indicare il nome dell’insegna e i contatti dell'esercente, AdMove ti chiederà di specificare il <b>prodotto in promozione</b> e la <b>percentuale di sconto</b>.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
            
                            <div class="col-md-2">
                                <a href="#" class="a-box height-100 pb-20">
                                    <div class="well box-target height-100" data-objective="AnotherTarget">
                                        <div class="row">
                                            <div class="col-xs-12 target-img another-target">
                                                <img class="img-responsive" src="assets/img/img-another-target.png" alt="">
                                            </div>
                                            <div class="col-xs-12">
                                                <p class="text-uppercase text-center title-sky-blue fs-15 sep-bottom">Altro?</p>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-35">
            <div class="col-xs-12 text-center">
                <button type="submit" class="btn btn-adm text-uppercase m-30">Scegli il prodotto</button>
            </div>
        </div>

    </form>

    <div class="modal fade" id="popup-multi" role="dialog" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog modal-lg mt-50" role="document">
            <div class="modal-content">
                <div class="modal-header bg-dark-blue">
                    <!-- <a href="#" class="a-box pull-left mr-15" data-dismiss="modal"><img src="assets/img/left-arrow.png"></a> -->
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title text-uppercase">Sono presenti più esercizi commerciali con le informazioni inserite, seleziona quello di tuo interesse</h4>
                </div>
                <div class="modal-body bg-blue">
                    <form data-toggle="validator" role="form">
                        <div class="row slogan-list" id="slogan-content">
                            <script id="slogan-list-template" type="text/x-handlebars-template">
                                {{#each .}}
                                <div class="col-md-12 slogan" data-id="{{ID}}">
                                    <span rel="name">{{Name}}</span>
                                    <span rel="address">{{Address}}</span>
                                </div> 
                                {{/each}}
                            </script>
                        </div>
                        <div class="row mt-15">
                            <div class="col-md-10 col-md-offset-1">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group mt-50">
                                            <div class="input-group input-group-lg">
                                                <span class="input-group-addon"><span class="input-ico ico-home"></span></span>
                                                <input type="text" class="form-control b-radius-right-2" name="slogan" readonly="readonly" required data-error="Campo obbligatorio">
                                                <label class="placeholder sky-blue">Come si chiama la tua attività</label>
                                            </div>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group mt-50">
                                            <div class="input-group input-group-lg">
                                                <span class="input-group-addon"><span class="input-ico ico-location"></span></span>
                                                <input type="text" class="form-control b-radius-right-2" name="address" readonly="readonly" required data-error="Campo obbligatorio">
                                                <label class="placeholder sky-blue">Dove si trova?</label>
                                            </div>
                                            <div class="help-block with-errors"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 text-center">
                                <button type="submit" class="btn btn-adm text-uppercase my-15-auto">Vai</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    $(document).ready(function () {

        /* Bootstrap Tooltip */
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        });

        /*
         * Autocomplete Category
         * https://twitter.github.io/typeahead.js/
         *
         */

        var category = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.whitespace,
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            remote: {
                url: baseUrl + "/api/businessCategory/suggest/",
                prepare: navigationService.currentPage.prepareCategoryBloodhound.bind(navigationService.currentPage),
                transform: navigationService.currentPage.transformCategoryBloodhound.bind(navigationService.currentPage)
            }
        });

        $("#category").typeahead({
            hint: true,
            highlight: true,
            minLength: 1
        },
        {
            name: "category",
            source: category,
            limit: 100,
            templates: {
                header: '<div class="tt-header">Suggerimenti ricerca</div>',
                footer: '<div class="tt-footer"><a href="#" data-nocategory="true" class="color-orange">Nessuna di queste?</a></div>',
                empty: [
                    '<div class="empty-message">',
                    '<a href="#" data-nocategory="true" class="color-orange">Nessuna di queste</a>',
                    '</div>'
                ].join('\n')
            }
        }).on("typeahead:selected", navigationService.currentPage.selectedCategoryBloodhound.bind(navigationService.currentPage));

        $('body').on('click', '.a-box .box-target', function (event) {
            var t = $(this), parent = $('.parent-target');//closest('div');

            event.preventDefault();

            var elements = parent.find('.a-box .box-target');
            if (elements.lenght <= 1) {
                return false;
            }
            if (t.hasClass('selected')) return false;
            else {
                t.addClass('selected');
                //console.log(parent);
                parent.find('.a-box .box-target').not(t).removeClass('selected');
            }
        });
    });


    var b = $('#popup-multi'), form = $('form');
    var sloganList = b.find('.slogan-list').on('click', '.slogan', function (evt) {
        var t = $(this);
        b.find('[name=slogan]').val(t.find('[rel=name]').text()).trigger('change');
        b.find('[name=address]').val(t.find('[rel=address]').text()).trigger('change');
        t.closest('.slogan-list').find('.slogan').removeClass('selected');
        b.find('[name=locationId]').val(t.data('id'));
        t.addClass('selected');
        form.validator('update'); 
    }); 
</script>